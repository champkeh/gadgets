<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>上海疫情趋势</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover"/>
    <script src="https://cdn.jsdelivr.net/npm/frappe-charts@1.2.4/dist/frappe-charts.min.iife.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>上海市4月以来的新增确诊/无症状感染人数趋势</h1>
<p class="note">数据来源：
    <a href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MjM5NTA5NzYyMA==&scene=124#wechat_redirect">
        《上海发布》公众号</a>
</p>

<p class="note">更新时间：<time id="updateAt"></time></p>
<main>
    <article id="chart1"></article>
    <article id="chart2"></article>
</main>
<script type="module" src="script.js"></script>
<script>
    fetch('/api/status').then(resp => resp.json()).then(data => {
        formatDatetime(new Date(data.updateAt))
    })
    const timeEl = document.getElementById('updateAt')
    function formatDatetime(date) {
        const options = {
            year: 'numeric', month: 'numeric', day: 'numeric',
            hour: 'numeric', minute: 'numeric', second: 'numeric',
            hour12: false,
        }
        timeEl.textContent = new Intl.DateTimeFormat('zh-CN', options).format(date)
    }
</script>
</body>
</html>
